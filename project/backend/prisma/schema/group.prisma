enum USER_ROLE {
    OWNER
    EDITOR
    VIEWER
}

model GroupFamily {
    id           String        @id @default(uuid()) @db.Uuid()
    name         String
    description  String?
    familyId     String?       @unique @db.Uuid()
    family       Family?       @relation(fields: [familyId], references: [id], onDelete: SetNull)
    createdAt    DateTime      @default(now())
    updatedAt    DateTime      @updatedAt
    groupMembers GroupMember[]
    invites      Invite[]

    @@index([familyId])
    @@map("group_family")
}

model GroupMember {
    id        String      @id @default(uuid()) @db.Uuid()
    role      USER_ROLE   @default(OWNER)
    groupId   String      @db.Uuid()
    group     GroupFamily @relation(fields: [groupId], references: [id], onDelete: Cascade)
    memberId  String      @db.Uuid()
    member    User        @relation(fields: [memberId], references: [id], onDelete: Cascade)
    isLeader  Boolean     @default(false)
    createdAt DateTime    @default(now())
    updatedAt DateTime    @updatedAt

    @@index([memberId, groupId])
    @@map("group_member")
}
